<packagegui>
	<name>OSPFd</name>
	<version>0.1</version>
	<title>Services: OSPFd</title>
	<include_file>/usr/local/pkg/openospfd.inc</include_file>
	<aftersaveredirect>pkg_edit.php?xml=openospfd.xml&amp;id=0</aftersaveredirect>
	<additional_files_needed>
                <prefix>/usr/local/pkg/</prefix>
                <chmod>077</chmod>
                <item>http://www.pfsense.com/packages/config/openospfd/openospfd.inc</item>
        </additional_files_needed>
	<additional_files_needed>
                <prefix>/usr/local/pkg/</prefix>
                <chmod>077</chmod>
                <item>http://www.pfsense.com/packages/config/openbgpd/openospfd_interfaces.xml</item>
        </additional_files_needed>
	<menu>
		<name>OSPFd</name>
		<tooltiptext>Modify ospfd settings.</tooltiptext>
		<section>Services</section>
		<configfile>openospfd.xml</configfile>
		<url>/pkg_edit.php?xml=openospfd.xml&amp;id=0</url>
	</menu>
	<tabs>
		<tab>
			<text>Global Settings</text>
			<url>pkg_edit.php?xml=openospfd.xml&amp;id=0</url>
			<active/>
		</tab>
		<tab>
			<text>Interface Settings</text>
			<url>pkg.php?xml=openospfd_interfaces.xml</url>
		</tab>
	</tabs>
	<service>
		<name>ospfd</name>
		<rcfile>ospfd.sh</rcfile>
		<executable>ospfd</executable>
	</service>
	<fields>
		<field>
			<fielddescr>Router ID</fielddescr>
			<fieldname>routerid</fieldname>
			<description>Specify the Router ID.</description>
			<type>input</type>
		</field>
		<field>
			<fielddescr>Area</fielddescr>
			<fieldname>area</fieldname>
			<description>OSPF area for this instance of OSPFd.</description>
			<type>input</type>
			<required/>
		</field>
                <field>
                        <fielddescr>Update FIB (Routing table)</fielddescr>
                        <fieldname>updatefib</fieldname>
                        <description>Disables the updating of the host routing table(turns into stub router).</description>
                        <type>checkbox</type>
                </field>
                <field>
                        <fielddescr>Redistribute connected subnets</fielddescr>
                        <fieldname>redistributeconnectedsubnets</fieldname>
                        <description>Enables the redistribution of connected networks (Default no)</description>
                        <type>checkbox</type>
                </field>
                <field>
                        <fielddescr>Redistribute default route</fielddescr>
                        <fieldname>redistributedefaultroute</fieldname>
                        <description>Enables the redistribution of a default route to this device (Default no)</description>
                        <type>checkbox</type>
                </field>
		<field>
                        <fielddescr>Redistribute static</fielddescr>
                        <fieldname>redistributestatic</fieldname>
                        <description>Enables the redistribution of static routes</description>
                        <type>checkbox</type>
                </field>
		<field>
			<fielddescr>SPF Hold Time</fielddescr>
			<fieldname>spfholdtime</fieldname>
			<description>Set the SPF holdtime in seconds.  The minimum time between two consecutive shortest path first calculations.  The default value is 5 seconds; the valid range is 1-5 seconds.</description>
			<type>input</type>
                </field>
		<field>
			<fielddescr>SPF Delay</fielddescr>
			<fieldname>spfdelay</fieldname>
			<description>Set SPF delay in seconds.  The delay between receiving an update to the link state database and starting the shortest path first calculation.  The default value is 1; valid range is 1-10 seconds.</description>
			<type>input</type>
                </field>
		<field>
			<fielddescr>RFC 1583 compatible</fielddescr>
			<fieldname>rfc1583</fieldname>
			<description>If set to yes, decisions regarding AS-external routes are evaluated according to RFC 1583.  The default is no.</description>
			<type>checkbox</type>
		</field>
		<field>
			<fielddescr>These rules take precedence over any redistribute options specified above.</fielddescr>
			<fieldname>none</fieldname>
			<type>rowhelper</type>
			<rowhelper>
				<rowhelperfield>
					<fielddescr>Disable Redistribute</fielddescr>
					<fieldname>redistribute</fieldname>
					<description>Redistribute rules.</description>
					<type>checkbox</type>
					<size>20</size>
				</rowhelperfield>
				<rowhelperfield>
					<fielddescr>Route value</fielddescr>
					<fieldname>routevalue</fieldname>
					<type>input</type>
					<size>25</size>
				</rowhelperfield>
                    </rowhelper>
		</field>
	</fields>
	<custom_php_resync_config_command>
                ospfd_install_conf();
        </custom_php_resync_config_command>
	<custom_php_validation_command>
		ospfd_validate_input();
	</custom_php_validation_command>
</packagegui>
