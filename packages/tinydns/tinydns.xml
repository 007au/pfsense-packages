<?xml version="1.0" encoding="utf-8" ?>
<packagegui>
	<name>tinydns</name>
	<version>1.0</version>
	<configpath>installedpackages->package->tinydns</configpath>
	<title>DNS Cache-Server: Settings</title>
	<menu>
		<name>DNS Cache-Server</name>
		<tooltiptext></tooltiptext>
		<section>Services</section>
		<url>/tinydns_status.php</url>
	</menu>
	<tabs>
		<tab>
			<text>Settings</text>
			<url>/pkg_edit.php?xml=tinydns.xml&amp;id=0</url>
			<active/>
		</tab>
		<tab>
			<text>View Domains</text>
			<url>/tinydns_dhcp_filter.php</url>
		</tab>
		<tab>
			<text>Add Domains</text>
			<url>/tinydns_filter.php</url>
		</tab>
		<tab>
			<text>Status</text>
			<url>/tinydns_status.php</url>
		</tab>
		<tab>
			<text>Logs</text>
			<url>/tinydns_view_logs.php</url>
		</tab>
		<tab>
			<text>Sync</text>
			<url>/pkg_edit.php?xml=tinydns_sync.xml&amp;id=0</url>
		</tab>
	</tabs>
	<aftersaveredirect>/pkg_edit.php?xml=tinydns.xml&amp;id=0</aftersaveredirect>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns.inc</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/pf/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_xmlrpc_sync.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_domains.xml</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/www/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_status.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/www/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_dhcp_filter.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/www/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_filter.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_down.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_up.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_parse_logs.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/www/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_view_logs.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_sync.xml</item>
	</additional_files_needed>
	<custom_php_install_command>
		tinydns_custom_php_install_command();
	</custom_php_install_command>
	<custom_php_deinstall_command>
		tinydns_custom_php_deinstall_command();
	</custom_php_deinstall_command>
	<custom_add_php_command>
		tinydns_custom_php_changeip_command();
		tinydns_custom_php_install_command();
		tinydns_create_zone_file();
		tinydns_setup_ping_items();
	</custom_add_php_command>
	<custom_php_resync_config_command>
		tinydns_custom_php_changeip_command();
		tinydns_custom_php_install_command();
		tinydns_create_zone_file();
		tinydns_setup_ping_items();
	</custom_php_resync_config_command>
	<custom_delete_php_command>
		tinydns_custom_php_changeip_command();
		tinydns_custom_php_install_command();
		tinydns_create_zone_file();
		tinydns_setup_ping_items();
	</custom_delete_php_command>
	<include_file>/usr/local/pkg/tinydns.inc</include_file>
	<fields>
		<field>
		 	<fielddescr>Enable DNS Forwarders</fielddescr>
			<fieldname>enableforwarding</fieldname>
			<description>Enable DNScache forwarder on LAN IP and register LAN's SOA, NS, A, and PTR Records with  TinyDNS Server.</description>
			<type>checkbox</type>
		</field>		
		<field>
		 	<fielddescr>Register DHCP static mappings with server</fielddescr>
			<fieldname>regdhcpstatic</fieldname>
			<description>Register static DHCP leases with TinyDNS server using the Fully Qualified Domain Name specified in System: General.</description>
			<type>checkbox</type>
		</field>		
		<field>
		 	<fielddescr>Register DHCP leases with server</fielddescr>
			<fieldname>regdhcp</fieldname>
			<description>Register active DHCP leases with TinyDNS server using the Fully Qualified Domain Name specified in System: General.</description>
			<type>checkbox</type>
		</field>		
		<field>
			<fieldname>ipaddress</fieldname>
			<fielddescr>IP Address</fielddescr>
			<description>Bind TinyDNS to this IP address. Create a Virtual Carp IP on the LAN segment when Enable DNS Forwarders is set.</description>
			<type>input</type>
		</field>
		<field>
			<fieldname>refreshinterval</fieldname>
			<fielddescr>Refresh Interval</fielddescr>
			<description>Controls how often the monitoring ip adresses are polled</description>
			<type>input</type>
		</field>
		<field>
			<fieldname>syncxmlrpc</fieldname>
			<fielddescr>XMLRPC Sync</fielddescr>
			<description>Sync TinyDNS configuration to backup firewalls</description>
			<type>checkbox</type>
		</field>
		<field>
			<fieldname>minsegment</fieldname>
			<fielddescr>Minimum segment size</fielddescr>
			<description>Recommended size: 10240 or larger.</description>
			<type>input</type>
			<value>10240</value>
		</field>
		<field>
			<fieldname>maxfilesize</fieldname>
			<fielddescr>Maximum file size</fielddescr>
			<description>Recommended size: 10240 or larger.</description>
			<type>input</type>
			<value>10240</value>
		</field>
		<field>
			<fieldname>maxsegment</fieldname>
			<fielddescr>Max Segment size</fielddescr>
			<description>Recommended size: 20480 or larger.</description>
			<type>input</type>
			<value>20480</value>
		</field>
		<field>
			<fieldname>maxfd</fieldname>
			<fielddescr>Maximum file descriptors</fielddescr>
			<description>Recommended size: 100 or larger.</description>
			<type>input</type>
			<value>100</value>
		</field>
		<field>
			<fieldname>maxchild</fieldname>
			<fielddescr>Maximum children processes</fielddescr>
			<description>Recommended size: 40 or larger.</description>
			<type>input</type>
			<value>40</value>
		</field>
	</fields>
</packagegui>
