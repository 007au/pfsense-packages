<?xml version="1.0" encoding="utf-8" ?>
<packagegui>
	<name>tinydns</name>
	<version>1.0</version>
	<configpath>installedpackages->package->tinydns</configpath>
	<title>TinyDNS: Settings</title>
	<menu>
		<name>DNS Server</name>
		<tooltiptext></tooltiptext>
		<section>Services</section>
		<url>/tinydns_status.php</url>
	</menu>
	<tabs>
		<tab>
			<text>Settings</text>
			<url>/pkg_edit.php?xml=tinydns.xml&amp;id=0</url>
			<active/>
		</tab>
		<tab>
			<text>Registered Domains</text>
			<url>/tinydns_dhcp_filter.php</url>
		</tab>
		<tab>
			<text>Status</text>
			<url>/tinydns_status.php</url>
		</tab>
		<tab>
			<text>Logs</text>
			<url>/tinydns_view_logs.php</url>
		</tab>
		<tab>
			<text>Sync</text>
			<url>/pkg_edit.php?xml=tinydns_sync.xml&amp;id=0</url>
		</tab>
	</tabs>
	<aftersaveredirect>/pkg_edit.php?xml=tinydns.xml&amp;id=0</aftersaveredirect>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns.inc</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/pf/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_xmlrpc_sync.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_domains.xml</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/www/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_status.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/www/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_dhcp_filter.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/www/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_filter.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_down.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_up.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_parse_logs.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/www/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_view_logs.php</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/pkg/</prefix>
		<chmod>077</chmod>
		<item>http://www.pfsense.com/packages/config/tinydns/tinydns_sync.xml</item>
	</additional_files_needed>
	<custom_php_install_command>
		tinydns_custom_php_install_command();
	</custom_php_install_command>
	<custom_php_deinstall_command>
		tinydns_custom_php_deinstall_command();
	</custom_php_deinstall_command>
	<custom_php_resync_config_command>
		tinydns_custom_php_changeip_command();
		tinydns_custom_php_install_command();
		tinydns_create_zone_file();
		tinydns_setup_ping_items();
	</custom_php_resync_config_command>
	<include_file>/usr/local/pkg/tinydns.inc</include_file>
	<fields>
		<field>
		 	<fielddescr>Bind TinyDNS to LAN</fielddescr>
			<fieldname>bind2lan</fieldname>
			<description>Set this option to bind TinyDNS to the LAN IP and sets up the LAN with SOA, NS, A, and PTR Records.</description>
			<type>checkbox</type>
		</field>		
		<field>
		 	<fielddescr>Register DHCP static mappings with TinyDNS</fielddescr>
			<fieldname>regdhcpstatic</fieldname>
			<description>Register DHCP static IPs with TinyDNS using the Fully Qualified Domain Name specified in System: General.</description>
			<type>checkbox</type>
		</field>		
		<field>
		 	<fielddescr>Register DHCP leases with TinyDNS</fielddescr>
			<fieldname>regdhcp</fieldname>
			<description>Register a valid DHCP hostname with TinyDNS using the Fully Qualified Domain Name specified in System: General.</description>
			<type>checkbox</type>
		</field>		
		<field>
			<fieldname>ipaddress</fieldname>
			<fielddescr>IP Address</fielddescr>
			<description>TinyDNS is bound to this IP address if Bind TinyDNS to LAN is not set.</description>
			<type>input</type>
		</field>
		<field>
			<fieldname>refreshinterval</fieldname>
			<fielddescr>Refresh Interval</fielddescr>
			<description>Controls how often the monitoring ip adresses are polled</description>
			<type>input</type>
		</field>
		<field>
			<fieldname>syncxmlrpc</fieldname>
			<fielddescr>XMLRPC Sync</fielddescr>
			<description>Sync TinyDNS configuration to backup firewalls</description>
			<type>checkbox</type>
		</field>
		<field>
			<fieldname>minsegment</fieldname>
			<fielddescr>Minimum segment size</fielddescr>
			<description>Recommended size: 10240 or larger.</description>
			<type>input</type>
			<value>10240</value>
		</field>
		<field>
			<fieldname>maxfilesize</fieldname>
			<fielddescr>Maximum file size</fielddescr>
			<description>Recommended size: 10240 or larger.</description>
			<type>input</type>
			<value>10240</value>
		</field>
		<field>
			<fieldname>maxsegment</fieldname>
			<fielddescr>Max Segment size</fielddescr>
			<description>Recommended size: 20480 or larger.</description>
			<type>input</type>
			<value>20480</value>
		</field>
		<field>
			<fieldname>maxfd</fieldname>
			<fielddescr>Maximum file descriptors</fielddescr>
			<description>Recommended size: 100 or larger.</description>
			<type>input</type>
			<value>100</value>
		</field>
		<field>
			<fieldname>maxchild</fieldname>
			<fielddescr>Maximum children processes</fielddescr>
			<description>Recommended size: 40 or larger.</description>
			<type>input</type>
			<value>40</value>
		</field>
	</fields>
</packagegui>
