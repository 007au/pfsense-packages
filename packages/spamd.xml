<?xml version="1.0" encoding="utf-8" ?>
<packagegui>
	<name>spamdsources</name>
	<version>0.2.0</version>
	<include_file>/usr/local/pkg/spamd.inc</include_file>
	<title></title>
	<!-- Menu is where this packages menu will appear -->
	<menu>
		<name>SpamD</name>
		<section>Services</section>
		<configfile>spamd.xml</configfile>
	</menu>
	<service>
                <name>spamd</name>
                <rcfile>spamd.sh</rcfile>
        </service>
	<tabs>
		<tab>
			<text>SpamD External Sources</text>
			<url>/pkg.php?xml=spamd.xml</url>
			<active/>
		</tab>
		<tab>
			<text>SpamD Whitelist</text>
			<url>/pkg.php?xml=spamd_whitelist.xml</url>
		</tab>
		<tab>
			<text>SpamD Settings</text>
			<url>/pkg_edit.php?xml=spamd_settings.xml&amp;id=0</url>
		</tab>
		<tab>
			<text>SpamD Database</text>
			<url>/spamd_db.php</url>
		</tab>		
	</tabs>
    	<additional_files_needed>
	    <prefix>/usr/local/www/</prefix>
	    <chmod>0755</chmod>
	    <item>http://www.pfsense.com/packages/config/spamd_rules.php</item>
	</additional_files_needed>
    	<additional_files_needed>
	    <prefix>/usr/local/pkg/</prefix>
	    <chmod>0755</chmod>
	    <item>http://www.pfsense.com/packages/config/spamd_whitelist.xml</item>
	</additional_files_needed>
    	<additional_files_needed>
	    <prefix>/usr/local/pkg/</prefix>
	    <chmod>0755</chmod>
	    <item>http://www.pfsense.com/packages/config/spamd.inc</item>
	</additional_files_needed>
    	<additional_files_needed>
	    <prefix>/usr/local/pkg/</prefix>
	    <chmod>0755</chmod>
	    <item>http://www.pfsense.com/packages/config/spamd_settings.xml</item>
	</additional_files_needed>
    	<additional_files_needed>
	    <prefix>/usr/local/www/</prefix>
	    <chmod>0755</chmod>
	    <item>http://www.pfsense.com/packages/config/spamd_db.php</item>
	</additional_files_needed>
	<!-- configpath gets expanded out automatically and config items will be
         stored in that location -->
	<configpath>['installedpackages']['spamd']['config']</configpath>
	<adddeleteeditpagefields>
		<columnitem>
			<fielddescr>Provider Name</fielddescr>
			<fieldname>providername</fieldname>
		</columnitem>
		<columnitem>
			<fielddescr>Provider Type</fielddescr>
			<fieldname>providertype</fieldname>
		</columnitem>
		<columnitem>
			<fielddescr>Description</fielddescr>
			<fieldname>providerdescription</fieldname>
		</columnitem>
	</adddeleteeditpagefields>
	<!-- fields gets invoked when the user adds or edits a item.   the following items
         will be parsed and rendered for the user as a gui with input, and selectboxes. -->
	<fields>
		<field>
			<fielddescr>Provider Name</fielddescr>
			<fieldname>providername</fieldname>
			<description>Enter the name of the source</description>
			<size>30</size>
			<type>input</type>
		</field>
		<field>
			<fielddescr>Provider Type</fielddescr>
			<fieldname>providertype</fieldname>
			<description>Select the Provider Type</description>
			<type>select</type>
			<value>black</value>
			<size>1</size>
			<options>
			    <option><value>black</value><name>Black List</name></option>
			    <option><value>white</value><name>White List</name></option>
			</options>
		</field>
		<field>
			<fielddescr>Provider Description</fielddescr>
			<fieldname>providerdescription</fieldname>
			<description>Enter the description for this item</description>
			<type>textarea</type>
			<size>30</size>
			<rows>4</rows>
			<cols>40</cols>			
		</field>
		<field>
			<fielddescr>Reject message</fielddescr>
			<fieldname>rejectmessage</fieldname>
			<description>Enter the message to display to emailing parties that are on this providers list</description>
			<type>textarea</type>
			<size>30</size>
			<rows>2</rows>
			<cols>40</cols>
		</field>
		<field>
			<fielddescr>Provider Method</fielddescr>
			<fieldname>providermethod</fieldname>
			<description>Select the Provider Method</description>
			<type>select</type>
			<value>http</value>
			<size>1</size>
			<options>
			    <option><value>http</value><name>URL</name></option>
			    <option><value>exec</value><name>Execute command</name></option>
			</options>
		</field>
		<field>
			<fielddescr>Provider URL or Filename</fielddescr>
			<fieldname>providerurl</fieldname>
			<description>Enter the URL to the provider.</description>
			<rows>4</rows>
			<cols>40</cols>
			<type>textarea</type>
		</field>
	</fields>
	<custom_delete_php_command>
		sync_package_spamd();
	</custom_delete_php_command>
	<custom_php_resync_config_command>
		sync_package_spamd();
	</custom_php_resync_config_command>
	<custom_php_install_command>
		custom_php_install_command();
	</custom_php_install_command>
	<custom_php_deinstall_command>
		custom_php_deinstall_command();
	</custom_php_deinstall_command>
</packagegui>