<?xml version="1.0" encoding="utf-8" ?>

<packagegui>
	<name>squidnac</name>
	<title>Services: Squid Advanced Proxy</title>		
	<configpath>installedpackages->package->squidnac->configuration->settings</configpath>		

	<aftersaveredirect>/pkg_edit.php?xml=squid_nac.xml&amp;id=0</aftersaveredirect>

	<tabs>
		<tab>
			<text>General Settings</text>
			<url>/pkg_edit.php?xml=squid_ng.xml&amp;id=0</url>
		</tab>
		
		<tab>
			<text>Upstream Proxy</text>
			<url>/pkg_edit.php?xml=squid_upstream.xml&amp;id=0</url>
		</tab>
		
		<tab>
			<text>Cache Mgmt</text>
			<url>/pkg_edit.php?xml=squid_cache.xml&amp;id=0</url>
		</tab>
			
		<tab>
			<text>Network Access Control</text>
			<url>/pkg_edit.php?xml=squid_nac.xml&amp;id=0</url>
			<active/>
		</tab>
			
		<tab>
			<text>Traffic Mgmt</text>
			<url>/pkg_edit.php?xml=squid_traffic.xml&amp;id=0</url>
		</tab>
			
		<!-- <tab>
			<text>Authentication Settings</text>
			<url>/pkg_edit.php?xml=squidauth.xml&amp;id=0</url>
		</tab>
		
		<tab>
			<text>Users</text>
			<url>/pkg_edit.php?xml=squidusers.xml&amp;id=0</url>
		</tab>		
		-->
	</tabs>
	
	<fields>
		<field>
			<fielddescr>Allowed Subnets</fielddescr>
			<fieldname>allowed_subnets</fieldname>
			<description>Subnets must be entered in the format of Network Address / Subnet Mask (e.g.: 192.168.1.0/24).  Enter domains separated by a semicolon (;).</description>
			<type>textarea</type>
			<rows>5</rows>
			<cols>50</cols>
		</field>
		
		<field>
			<fielddescr>Unrestricted IP Addresses</fielddescr>
			<fieldname>unrestricted_ip_address</fieldname>
			<description>Specify each unrestricted IP address separated by a semicolon (;).</description>
			<type>textarea</type>
			<rows>5</rows>
			<cols>50</cols>
		</field>
		
		<field>
			<fielddescr>Unrestricted MAC Addresses</fielddescr>
			<fieldname>unrestricted_mac_addresses</fieldname>
			<description>Specify each unrestricted MAC address separated by a semicolon (;).</description>
			<type>textarea</type>
			<rows>5</rows>
			<cols>50</cols>		
		</field>
		
		<field>
			<fielddescr>Banned IP Addresses</fielddescr>
			<fieldname>banned_ip_addresses</fieldname>
			<description>Specify each banned IP address separated by a semicolon (l).</description>
			<type>textarea</type>
			<rows>5</rows>
			<cols>50</cols>
		</field>	
		
		<field>
			<fielddescr>Banned MAC Addresses</fielddescr>
			<fieldname>banned_mac_addresses</fieldname>
			<description>Specify each banned MAC address separated by a semicolon (;).</description>
			<type>textarea</type>
			<rows>5</rows>
			<cols>50</cols>
		</field>
	
	</fields>

	<custom_add_php_command_late>	
		require_once("/usr/local/pkg/squid_ng.inc");

		global_write_squid_config();
		mwexec("/usr/local/sbin/squid -k reconfigure");
	</custom_add_php_command_late>

</packagegui>