<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE packagegui SYSTEM "../schema/packages.dtd">
<?xml-stylesheet type="text/xsl" href="../xsl/package.xsl"?>
<packagegui>
    <description>Describe your package here</description>
    <requirements>Describe your package requirements here</requirements>
    <faq>Currently there are no FAQ items provided.</faq>

	<name>squidguardgeneral</name>
	<version>1.2.0_1</version>
	<title>Proxy Content filter SquidGuard: General settings</title>
	<include_file>/usr/local/pkg/squidguard.inc</include_file>

	<!-- Installation -->
	<menu>
		<name>Proxy Content filter</name>
		<tooltiptext>Modify the proxy server's filter settings</tooltiptext>
		<section>Services</section>
		<url>/pkg_edit.php?xml=squidguard.xml&amp;id=0</url>
	</menu>

	<tabs>
		<tab>
			<text>General settings</text>
			<url>/pkg_edit.php?xml=squidguard.xml&amp;id=0</url>
			<active/>
		</tab>
		<tab>
			<text>Default</text>
			<url>/pkg_edit.php?xml=squidguard_default.xml&amp;id=0</url>
		</tab>
		<tab>
			<text>ACL</text>
			<url>/pkg.php?xml=squidguard_acl.xml</url>
		</tab>
		<tab>
			<text>Destinations</text>
			<url>/pkg.php?xml=squidguard_dest.xml</url>			
		</tab>
		<tab>
			<text>Times</text>
			<url>/pkg.php?xml=squidguard_time.xml</url>
		</tab>
		<tab>
			<text>Rewrites</text>
			<url>/pkg.php?xml=squidguard_rewr.xml</url>
		</tab>
		<tab>
			<text>Log</text>
			<url>/pkg_edit.php?xml=squidguard_log.xml</url>
		</tab>
	</tabs>
	
	<service>
		<name>squidGuard</name>
		<description>Proxy server filter Service</description>
		<executable>squidGuard</executable>
	</service>

	<additional_files_needed>
		<item>http://www.pfsense.org/packages/config/squidGuard/squidguard.inc</item>
	</additional_files_needed>
	<additional_files_needed>
		<item>http://www.pfsense.org/packages/config/squidGuard/squidguard_configurator.inc</item>
	</additional_files_needed>
	<additional_files_needed>
		<item>http://www.pfsense.org/packages/config/squidGuard/squidguard_acl.xml</item>
	</additional_files_needed>
	<additional_files_needed>
		<item>http://www.pfsense.org/packages/config/squidGuard/squidguard_default.xml</item>
	</additional_files_needed>
	<additional_files_needed>
		<item>http://www.pfsense.org/packages/config/squidGuard/squidguard_dest.xml</item>
	</additional_files_needed>
	<additional_files_needed>
		<item>http://www.pfsense.org/packages/config/squidGuard/squidguard_rewr.xml</item>
	</additional_files_needed>
<!--
	<additional_files_needed>
		<item>http://www.pfsense.org/packages/config/squidGuard/squidguard_src.xml</item>
	</additional_files_needed>
-->
	<additional_files_needed>
		<item>http://www.pfsense.org/packages/config/squidGuard/squidguard_time.xml</item>
	</additional_files_needed>
	<additional_files_needed>
		<item>http://www.pfsense.org/packages/config/squidGuard/squidguard_log.xml</item>
	</additional_files_needed>
	<additional_files_needed>
		<prefix>/usr/local/www/</prefix>
		<chmod>0755</chmod>
		<item>http://www.pfsense.org/packages/config/squidGuard/sgerror.php</item>
	</additional_files_needed>

	<fields>		
		<field>
			<fielddescr>Enable</fielddescr>
			<fieldname>squidguard_enable</fieldname>
			<description>Check this for enable squidGuard</description>
			<type>checkbox</type>
		</field>
		<field>
			<fielddescr>Blacklist</fielddescr>
			<fieldname>blacklist</fieldname>
			<description>Check this for enable blacklist</description>
			<type>checkbox</type>
		</field>
		<field>
			<fielddescr>Blacklist proxy</fielddescr>
			<fieldname>blacklist_proxy</fieldname>
			<description>
				Blacklist upload proxy - enter here, or leave blank. 
				Format: host:[port login:pass] . Default proxy port 1080. 
				Example: '192.168.0.1:8080 user:pass' 
			</description>
			<type>input</type>
			<size>100</size>
		</field>
		<field>
			<fielddescr>Blacklist URL</fielddescr>
			<fieldname>blacklist_url</fieldname>
			<description>Enter FTP, HTTP or LOCAL (pfSense) URL blacklist archive, or leave blank.</description>
			<type>input</type>
			<size>100</size>
		</field>
		<field>
			<fielddescr>Redirect mode</fielddescr>
			<fieldname>redirect_mode</fieldname>
			<description>
				Select redirect mode here. If you selected 'Internal', then will use internal 'sgerror.php' page. 
				Else - all redirect url's will added 'as it is'. In this situation you can't use 'HTTP error codes',
				'BLANK' and 'BLANK_IMG' extensions, only you self error page URL.				
			</description>
			<type>select</type>
			<value>rmod_int</value>
			<options>
				<option><name>Internal</name><value>rmod_int</value></option>
				<option><name>External as Moved (http '301' code)</name><value>rmod_301</value></option>
				<option><name>External as Found (http '302' code)</name><value>rmod_302</value></option>
			</options>
		</field>
		<field>
			<fielddescr>Emulate error HTTP header</fielddescr>
			<fieldname>emu_err_http_hdr</fieldname>
			<description>
				Check this for enable emulation error code HTTP header, 
				when proxy-filter deny access to URL with specified HTTP error code 
				in 'Redirect' field's. This may change behaviour client's IE brouser 
				and affiliated proxy.
			</description>
			<type>checkbox</type>
		</field>
		<field>
			<fielddescr>View GUI log</fielddescr>
			<fieldname>view_gui_log</fieldname>
			<description>Check this for view GUI log</description>
			<type>checkbox</type>
		</field>
	</fields>
	<custom_add_php_command/>
	<custom_php_command_before_form>
		squidguard_before_form(&amp;$pkg);
	</custom_php_command_before_form>
	<custom_php_after_form_command> 
        squidGuard_print_javascript();
	</custom_php_after_form_command>
	<custom_php_resync_config_command>
		squidguard_resync();
	</custom_php_resync_config_command>
	<custom_php_install_command>
		squidguard_install_command();
		squidguard_resync();
	</custom_php_install_command>
	<custom_php_deinstall_command>
		squidguard_deinstall_command();
	</custom_php_deinstall_command>
</packagegui>